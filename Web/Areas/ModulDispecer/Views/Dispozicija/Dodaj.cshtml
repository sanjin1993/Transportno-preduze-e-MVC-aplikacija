@model TransportnoPreduzece.Web.Areas.ModulDispecer.Models.DispozicijaDetaljnoVM
@using System.Web.Script.Serialization
@{
    ViewBag.Title = "Index";
}


@{ string data = new JavaScriptSerializer().Serialize(Model);}
<script src="~/Scripts/knockout-3.4.1.js"></script>
<script src="~/Scripts/knockout.mapping-latest.js"></script>
<script src="~/Scripts/DispozicijaVM.js?v=1.1"></script>

<div class="row dispozicija unos">
    <div class="col-md-12 ">

        <div class="col-xs-12 col-md-5 ">

            <div class="x_panel">
                <div class="x_title">
                    <h3 class="x-title">Detalji dispozicije</h3>
                </div>
                <div class="panel-body detalji">
                    <div class="form-group">
                        <label>Klijent</label>
                        <select data-bind="options: Klijenti, optionsText:'Naziv',optionsValue:'KlijentId',value:KlijentId,optionsCaption:'Odaberite klijenta'" class="form-control"></select>
                        
                    </div>
                    <div class="form-group">
                        <label>Cijena</label>
                        <input data-bind="value:Cijena" class="form-control" />
                    </div>

                    <div class="form-group">
                        <label>Datum plaćanja</label>
                        @Html.TextBoxFor(x=>x.DatumPlacanja,new { @class= "form-control", @data_bind = "value:DatumPlacanja" })


                    </div>
                    
                    <div class="form-group">
                        <label>Datum ispostave</label>
                        <input data-bind="value:DatumIspostave" class="form-control" />
                    </div>
                 
                    <div class="form-group">
                        <label>Primalac</label>
                        <input data-bind="value:Primalac" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Država od</label>
                        <select data-bind="options: Drzave, optionsText:'Naziv',optionsValue:'DrzavaId',value:DrzavaOdId,optionsCaption:'Odaberite državu'" class="form-control"></select>
                    </div>
                    <div class="form-group">
                        <label>Adresa od</label>
                        <input class="form-control" data-bind="value:AdresaOd" />
                    </div>
                    <div class="form-group">
                        <label>Država do</label>
                        <select data-bind="options: Drzave, optionsText:'Naziv',optionsValue:'DrzavaId',value:DrzavaDoId,optionsCaption:'Odaberite državu'" class="form-control"></select>
                    </div>
                    <div class="form-group">
                        <label>Adresa do</label>
                        <input class="form-control" data-bind="value:AdresaDo" />
                    </div>
                    <div class="form-group">
                        <label>Dodatne informacije</label>
                        <input data-bind="value:DodatneInformacije" class="form-control" name="DodatneInformacije" />
                    </div>
                    <p class="error-msg" ></p>
                    <button class="btn btn-primary" data-bind="click:save">Spremi</button>
                </div>
            </div>

           
            </div>
        <div class="col-sm-7 stavke">
            <div class="x_panel">
                <div class="x_title">
                    <h3 class="x-title">Stavke</h3>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-md-5">
                        <label>Naziv</label>
                        <input class="form-control" data-bind="value:NazivStavke" />
                    </div>
                    <div class="form-group col-xs-12 col-md-2">
                        <label>Kolicina</label>
                        <input class="form-control" data-bind="value:Kolicina" />
                    </div>
                    <div class="form-group col-xs-11 col-md-5">
                        <label>Jedinica</label>
                        <select data-bind="options: TipKolicine, optionsText:'Naziv',optionsValue:'KolicinaTipId',value:KolicinaTipId,optionsCaption:'Odaberite tip'" class="form-control" name="KolicinaTip"></select>
                        <a  class="btn btn-success pull-right" data-bind="click:addStavka">+</a>
                        
                    </div>
                 
                 
                </div>
                <div class="x_title">
                    <h3 class="x-title"></h3>
                </div>
                <div class="row" >
                    <div class="col-md-10">
                        <table>
                            <tbody data-bind="foreach:Stavke">
                                <tr>
                                    <td class="col-md-5" data-bind="text:Naziv"></td>
                                    <td class="col-md-2" data-bind="text:Kolicina"></td>
                                    <td class="col-md-3 measurement-unit"></td>

                                </tr>
                            </tbody>
                        </table>
                        <p id="stavke-error" class="text-center has-warning "></p>
                    </div>
                   
                </div>
                </div>
            </div>
        </div>
    </div>

            <script>
    var Model = new DispozicijaVM(@Html.Raw(data));
                ko.applyBindings(Model);
                clearForm();
            </script>
